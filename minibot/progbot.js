/*! progbot v1.0.0 (c) sarkiroka */
(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=8)})([function(a,b,c){(function(d){function e(){var a;try{a=b.storage.debug}catch(a){}return!a&&'undefined'!=typeof d&&'env'in d&&(a=d.env.DEBUG),a}b=a.exports=c(12),b.log=function(){return'object'==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},b.formatArgs=function(a){var d=this.useColors;if(a[0]=(d?'%c':'')+this.namespace+(d?' %c':' ')+a[0]+(d?'%c ':' ')+'+'+b.humanize(this.diff),!!d){var e='color: '+this.color;a.splice(1,0,e,'color: inherit');var c=0,f=0;a[0].replace(/%[a-zA-Z%]/g,function(a){'%%'===a||(c++,'%c'===a&&(f=c))}),a.splice(f,0,e)}},b.save=function(a){try{null==a?b.storage.removeItem('debug'):b.storage.debug=a}catch(a){}},b.load=e,b.useColors=function(){return'undefined'!=typeof window&&window.process&&'renderer'===window.process.type||('undefined'!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:'undefined'!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||'undefined'!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||'undefined'!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||'undefined'!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},b.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(a){}}(),b.colors=['#0000CC','#0000FF','#0033CC','#0033FF','#0066CC','#0066FF','#0099CC','#0099FF','#00CC00','#00CC33','#00CC66','#00CC99','#00CCCC','#00CCFF','#3300CC','#3300FF','#3333CC','#3333FF','#3366CC','#3366FF','#3399CC','#3399FF','#33CC00','#33CC33','#33CC66','#33CC99','#33CCCC','#33CCFF','#6600CC','#6600FF','#6633CC','#6633FF','#66CC00','#66CC33','#9900CC','#9900FF','#9933CC','#9933FF','#99CC00','#99CC33','#CC0000','#CC0033','#CC0066','#CC0099','#CC00CC','#CC00FF','#CC3300','#CC3333','#CC3366','#CC3399','#CC33CC','#CC33FF','#CC6600','#CC6633','#CC9900','#CC9933','#CCCC00','#CCCC33','#FF0000','#FF0033','#FF0066','#FF0099','#FF00CC','#FF00FF','#FF3300','#FF3333','#FF3366','#FF3399','#FF33CC','#FF33FF','#FF6600','#FF6633','#FF9900','#FF9933','#FFCC00','#FFCC33'],b.formatters.j=function(a){try{return JSON.stringify(a)}catch(a){return'[UnexpectedJSONParseError]: '+a.message}},b.enable(e())}).call(b,c(11))},function(a){var b=function(a,c){b.canvas=a,b.ctx=c};b.canvas=null,b.ctx=null,b.center={},b.centerX=0,b.centerY=0,b.setSize=function(a,c){b.width=a,b.height=c,b.canvas.width=a,b.canvas.height=c,b.centerX=a/2,b.centerY=c/2,b.center={x:b.centerX,y:b.centerY}},a.exports=b},function(a,b,c){var d=c(16),e={IDLE:'IDLE',CHECK_ANIMATION:'CHECK_ANIMATION',RESULT_ANIMATION:'RESULT_ANIMATION',END:'END'},f=[],g=0,h=e.IDLE;a.exports=function(a){if('undefined'!=typeof a&&1<=arguments.length){var b='string'==typeof e[a];b?h=e[a]:console.warn(a,'is not a valid state')}return h},a.exports.IDLE=e.IDLE,a.exports.CHECK_ANIMATION=e.CHECK_ANIMATION,a.exports.RESULT_ANIMATION=e.RESULT_ANIMATION,a.exports.END=e.END,a.exports.addProgramStep=function(a){return h==e.IDLE?(f.push(a),1):(console.warn('the operation is not permitted by current game state'),-1)},a.exports.removeLastProgramStep=function(){return h==e.IDLE?0==f.length?(console.warn('there are no more proram step'),0):(f.pop(),1):(console.warn('the operation is not permitted by current game state'),-1)},a.exports.getProgram=function(){return f};var i=null;a.exports.getBoard=function(){return i},a.exports.levelUp=function(){g++},a.exports.loadBoard=function(a){d(g,function(b,c){b?console.error('error in board request',b):i=c,f=[],a()})}},function(a){a.exports={backgroundColor:'#777',programStepBackground:'#999',programStepHighlightBackground:'#ddd',arrowGradientStartColor:'#000',arrowGradientEndColor:'#888',arrowHighlightGradiendStartColor:'#800',arrowHighlightGradiendEndColor:'#d00',programStepSize:50,programStepMargin:3,boardItemSize:50,boardItemMargin:3,dummy:null}},function(a,b,c){var d=c(5),e=c(0)('progbot:draw:redraw'),f=c(6),g=c(23),h=c(2);a.exports=function(){e('now redraw'),d(),g(h.getProgram()),f(h.getBoard())}},function(a,b,c){var d=c(1),e=c(3),f=c(0)('progbot:draw:clear');a.exports=function(){f('clear all pixels');var a=d.ctx;a.setTransform(1,0,0,1,0,0),a.fillStyle=e.backgroundColor,a.fillRect(0,0,d.canvas.width,d.canvas.height)}},function(a,b,c){var d=Math.floor,e=c(1),f=c(3),g=c(0)('progbot:draw:board'),h=c(20),j=c(22);a.exports=function(a,b){var c=j(a),k=e.centerX-d(c.x/2)*f.boardItemSize-f.boardItemSize/2,l=e.centerY-d(c.y/2)*f.boardItemSize-f.boardItemSize/2;if(g('draw the board'),e.ctx.fillStyle='#eee',e.ctx.strokeStyle='#000',a)for(var m=0;m<a.length;m++)h(a[m],b);var i={x:k,y:l,w:2*(e.centerX-k),h:2*(e.centerY-l)};return i}},function(a,b,c){var d=c(26);a.exports=function(){document.addEventListener('keydown',d)},a.exports.done=function(){document.removeEventListener('keydown',d)}},function(a,b,c){var d=c(9),e=c(36);d(),e()},function(a,b,c){c(10);var d=c(14),e=c(15),f=c(18),g=c(7);a.exports=function(){e(function(){d(),f(),g()})}},function(a,b,c){var d=c(0);d.enable('progbot:*,'+['draw:arrow','draw:draw-step','draw:program-steps','draw:board:get-size'].map(function(a){return'-progbot:'+a}).join());var e=d('progbot:init:debug');e('\t\t\t--==[ start ]==--\t\t\t')},function(a){function b(){throw new Error('setTimeout has not been defined')}function c(){throw new Error('clearTimeout has not been defined')}function d(a){if(j===setTimeout)return setTimeout(a,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function e(a){if(k===clearTimeout)return clearTimeout(a);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=d(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,e(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};(function(){try{j='function'==typeof setTimeout?setTimeout:b}catch(a){j=b}try{k='function'==typeof clearTimeout?clearTimeout:c}catch(a){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(a,b,c){function d(a){var c,d=0;for(c in a)d=(d<<5)-d+a.charCodeAt(c),d|=0;return b.colors[Math.abs(d)%b.colors.length]}function e(a){function c(){if(c.enabled){var a=c,d=+new Date,f=d-(e||d);a.diff=f,a.prev=e,a.curr=d,e=d;for(var g=Array(arguments.length),h=0;h<g.length;h++)g[h]=arguments[h];g[0]=b.coerce(g[0]),'string'!=typeof g[0]&&g.unshift('%O');var i=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(c,d){if('%%'===c)return c;i++;var e=b.formatters[d];if('function'==typeof e){var f=g[i];c=e.call(a,f),g.splice(i,1),i--}return c}),b.formatArgs.call(a,g);var j=c.log||b.log||console.log.bind(console);j.apply(a,g)}}var e;return c.namespace=a,c.enabled=b.enabled(a),c.useColors=b.useColors(),c.color=d(a),c.destroy=f,'function'==typeof b.init&&b.init(c),b.instances.push(c),c}function f(){var a=b.instances.indexOf(this);return-1!==a&&(b.instances.splice(a,1),!0)}b=a.exports=e.debug=e['default']=e,b.coerce=function(a){return a instanceof Error?a.stack||a.message:a},b.disable=function(){b.enable('')},b.enable=function(a){b.save(a),b.names=[],b.skips=[];var c,d=('string'==typeof a?a:'').split(/[\s,]+/),e=d.length;for(c=0;c<e;c++)d[c]&&(a=d[c].replace(/\*/g,'.*?'),'-'===a[0]?b.skips.push(new RegExp('^'+a.substr(1)+'$')):b.names.push(new RegExp('^'+a+'$')));for(c=0;c<b.instances.length;c++){var f=b.instances[c];f.enabled=b.enabled(f.namespace)}},b.enabled=function(a){if('*'===a[a.length-1])return!0;var c,d;for(c=0,d=b.skips.length;c<d;c++)if(b.skips[c].test(a))return!1;for(c=0,d=b.names.length;c<d;c++)if(b.names[c].test(a))return!0;return!1},b.humanize=c(13),b.instances=[],b.names=[],b.skips=[],b.formatters={}},function(a){function b(a){if(a+='',!(100<a.length)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),e=(b[2]||'ms').toLowerCase();return'years'===e||'year'===e||'yrs'===e||'yr'===e||'y'===e?c*d:'days'===e||'day'===e||'d'===e?c*h:'hours'===e||'hour'===e||'hrs'===e||'hr'===e||'h'===e?c*k:'minutes'===e||'minute'===e||'mins'===e||'min'===e||'m'===e?c*j:'seconds'===e||'second'===e||'secs'===e||'sec'===e||'s'===e?c*i:'milliseconds'===e||'millisecond'===e||'msecs'===e||'msec'===e||'ms'===e?c:void 0}}}function c(a){return a>=h?g(a/h)+'d':a>=k?g(a/k)+'h':a>=j?g(a/j)+'m':a>=i?g(a/i)+'s':a+'ms'}function e(a){return f(a,h,'day')||f(a,k,'hour')||f(a,j,'minute')||f(a,i,'second')||a+' ms'}function f(a,b,c){return a<b?void 0:a<1.5*b?Math.floor(a/b)+' '+c:Math.ceil(a/b)+' '+c+'s'}var g=Math.round,i=1e3,j=60*i,k=60*j,h=24*k,d=365.25*h;a.exports=function(a,d){d=d||{};var f=typeof a;if('string'==f&&0<a.length)return b(a);if('number'==f&&!1===isNaN(a))return d.long?e(a):c(a);throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(a))}},function(a,b,c){var d=c(1);a.exports=function(){var a=document.getElementById('c'),b=a.getContext('2d');d(a,b)}},function(a,b,c){var d=c(2);a.exports=function(a){d.loadBoard(a)}},function(a,b,c){var d=c(0)('progbot:game:board:get-board'),e=c(17);a.exports=function(a,b){var c=e(a,4,'0')+'.json';d('try to get the "%s" board',c);var f=new XMLHttpRequest;f.open('GET',c),f.onload=function(){var a=[],c=null;if(200==f.status)try{var d=JSON.parse(f.responseText);a=d}catch(a){c='json parse error in ajax request'}else c='ajax request failed. status code: '+f.status;b(c,a)},f.send()}},function(a){a.exports=function(a,b,c){var d=a+'',e=c+'',f=!!e.length,g=d.length<b;for(f||console.warn('pad inpossible because no pad character defined',arguments);g&&f;)d=e+d,g=d.length<b;return d}},function(a,b,c){var d=c(19);a.exports=function(){window.addEventListener('resize',d),d()},a.exports.done=function(){window.removeEventListener('resize',d)}},function(a,b,c){var d=c(1),f=c(0)('progbot:event:resize'),g=c(4);a.exports=function(a){f(a?'resize event handling':'initial resize event'),d.setSize(window.innerWidth,window.innerHeight),g()}},function(a,b,c){var d=Math.PI,e=c(1),f=c(3),g=c(40),h=c(21),i=c(39),j=document.getElementById('box');a.exports=function(a,b){var c=e.ctx,k=g(a.x,a.y),l=k.x,m=k.y,n=f.boardItemSize-f.boardItemMargin,o=0.05*n,p=0.9*n,q=0.4*n,r=0.2*n,s=0.5*n;switch(c.fillRect(l-s,m-s,n,n),c.strokeRect(l-s,m-s,n,n),a.type){case h.X:c.save(),c.translate(l,m),c.rotate(3*Math.random()*d/180),c.drawImage(j,-s+o,-s+o,p,p),c.restore();break;case h.S:b||i({x:l,y:m,direction:0});break;case h.E:c.save(),c.translate(l,m),c.beginPath(),c.strokeStyle='#000',c.lineWidth=o,c.arc(0,0,q,0,2*d),c.stroke(),c.beginPath(),c.strokeStyle='#D00',c.fillStyle='#D00',c.arc(0,0,2*o,0,2*d),c.stroke(),c.fill(),c.beginPath(),c.lineWidth=1,c.strokeStyle='#000',c.moveTo(0,-q),c.lineTo(0,q),c.moveTo(-q,0),c.lineTo(q,0),c.moveTo(-r,-o),c.lineTo(-r,o),c.moveTo(r,-o),c.lineTo(r,o),c.lineWidth=0.5,c.moveTo(-o,r),c.lineTo(o,r),c.moveTo(-o,-r),c.lineTo(o,-r),c.stroke(),c.restore();}}},function(a){a.exports={S:2,E:4,X:1,C:6,"#":0}},function(a,b,c){var d=c(0)('progbot:draw:board:get-size'),e={x:0,y:0};a.exports=function(a){if(!a||!a.length)d('zero length board found',a),h=e;else{var b=Infinity,c=Infinity,f=-Infinity,g=-Infinity;a.forEach(function(a){a.x<b&&(b=a.x),a.x>f&&(f=a.x),a.y<c&&(c=a.y),a.y>g&&(g=a.y)});var h={x:f-b,y:g-c};d('found a board with size',h)}return h}},function(a,b,c){var d=c(1),e=c(3),f=c(0)('progbot:draw:program-steps'),g=c(24);a.exports=function(a,b){var c=Math.max(1,Math.floor(d.width/e.programStepSize)),h=Math.ceil(a.length/c);f('now draw %d rows and %d cols',h,c);var i=0;d.ctx.lineWidth=1,d.ctx.strokeStyle='#000';for(var j=h-1;-1<j;j--)for(var k=0;k<c&&!(i>a.length-1);k++)g(j,k,a[i],b==i),i++}},function(a,b,c){var d=c(1),e=c(3),f=c(0)('progbot:draw:draw-step'),g=c(25),h=e.programStepSize-e.programStepMargin;a.exports=function(a,b,c,i){f('now draw a step',a,b,c);var j=b*e.programStepSize,k=d.height-(a+1)*e.programStepSize;d.ctx.fillStyle=i?e.programStepHighlightBackground:e.programStepBackground,d.ctx.fillRect(j,k,h,h),d.ctx.strokeRect(j,k,h,h),g(j+h/2,k+h/2,c,h,i)}},function(a,b,c){var d=Math.PI,e=c(1),f=c(3),g=c(0)('progbot:draw:arrow'),h={left:270*d/180,up:0*d/180,right:90*d/180,down:180*d/180},i=null;a.exports=function(a,b,c,d,j){var k=0.45*d,l=0.25*d,m=0.2*d,n=0.05*d,o=e.ctx;if(g('draw %s arrow',c),o.save(),o.translate(a,b),o.rotate(h[c]),o.beginPath(),j){var p=o.createLinearGradient(0,k,0,-k);p.addColorStop(0,f.arrowHighlightGradiendStartColor),p.addColorStop(1,f.arrowHighlightGradiendEndColor),o.fillStyle=p}else i||(i=o.createLinearGradient(0,k,0,-k),i.addColorStop(0,f.arrowGradientStartColor),i.addColorStop(1,f.arrowGradientEndColor)),o.fillStyle=i;o.moveTo(0,-k),o.lineTo(k,0),o.lineTo(m,-n),o.lineTo(l,k),o.lineTo(-l,k),o.lineTo(-m,-n),o.lineTo(-k,0),o.closePath(),o.fill(),o.stroke(),o.restore()}},function(a,b,c){var d=c(27),e=c(44),f=c(31),g=c(34);a.exports=function(a){switch(a.preventDefault(),a.key){case'Escape':e();break;case'Enter':f();break;case'ArrowLeft':case'ArrowRight':case'ArrowUp':case'ArrowDown':g(a.key.replace('Arrow','').toLowerCase());break;case'Backspace':d();break;case'F5':location.reload();break;default:console.log('unhandled keyboard event',a);}}},function(a,b,c){var d=c(28),e=c(4),f=c(2);a.exports=function(){f()==f.IDLE?(d(),e()):console.warn('don\'t touch keyboard while animating...',f())}},function(a,b,c){var d=c(2);a.exports=function(){d.removeLastProgramStep()}},,function(a,b,c){var d=c(1),e=c(5);a.exports=function(){e();var a=d.ctx;a.textAlign='center',a.fillStyle='#e00',a.font='64px Arial',a.fillText('The End',d.centerX,d.centerY)}},function(a,b,c){function d(){m(m.IDLE),k()}var e=c(32),f=c(41),g=c(6),h=c(42),i=c(45),j=c(43),k=c(4),l=c(33),m=c(2),n=-1,o=null,p=!1;a.exports=function(){if(m()==m.IDLE){m(m.CHECK_ANIMATION),p=!1;var a=g(m.getBoard(),!0);a=i(a),l(a),e(function(a,b){setTimeout(function(){m(m.RESULT_ANIMATION),l.clear(),e.reset(),o=f(b),h(o),o?(m.levelUp(),m.loadBoard(function(){p=!0,n=setTimeout(d,1e3*j.resultTimeSeconds)})):n=setTimeout(d,1e3*j.resultTimeSeconds)},1e3*j.beforeResultTimeSeconds)})}else console.warn('don\'t touch the keyboard while animating!!',m())},a.exports.cancelResult=function(){(!o||p)&&(clearTimeout(n),d())}},function(a,b,c){var d=c(37),e=c(40),f=c(21),g=c(0)('progbot:event:on:end-of-programming:animate-program'),h=c(23),i=c(43),j=c(2),k=-1,l=null;a.exports=function a(b){var c=null,m=j.getProgram();if(0==m.length)return c=new Error('there is no program'),b(c,null);if(!l){g('there is no robot position, calculate it');var n=j.getBoard(),o=n.find((a)=>a.type==f.S);if(!o)return c=new Error('invalid board, no start position defined'),console.error(c),b(c,null);var p=e(o.x,o.y);l={x:p.x,y:p.y,direction:0}}k++;var q=m[k];h(m,k),d(l,q,function(c,d){d?b(null,c):setTimeout(function(){l=c,k<m.length-1?a(b):b(null,c)},1e3*i.waitForNextStepSeconds)})},a.exports.reset=function(){k=-1,l=null}},function(a,b,c){var d=c(1),e=c(0)('progbot:draw:board:save'),f=null,g=null;a.exports=function(a){(f||g)&&console.warn('overwrite a saved image data'),f=d.ctx.getImageData(a.x,a.y,a.w,a.h),g={x:a.x,y:a.y}},a.exports.clear=function(){f=null,g=null},a.exports.restore=function(){d.ctx.putImageData(f,g.x,g.y)}},function(a,b,c){var d=c(35),e=c(4),f=c(2);a.exports=function(a){f()==f.IDLE?(d(a),e()):console.warn('don\'t touch keyboard while animating!',f())}},function(a,b,c){var d=c(2);a.exports=function(a){d.addProgramStep(a)}},function(a){a.exports=function(){}},function(a,b,c){var d=c(38),e=c(46),f=c(0)('progbot:event:on:end-of-programming:animate-step'),g=c(39),h=c(48),i=c(43),j=c(47),k=c(33),l=1e3*i.robotStepTimeSeconds;a.exports=function(a,b,c){function i(){var e=Date.now(),f=Math.min(1,(e-o)/l),j=d(a,b,p?f:0.1*Math.random());k.restore(),g(j),1>f?setTimeout(i,1e3/25):p?null==n?h(j,function(){c(j,!0)}):c(j):(k.restore(),g(a),c(a))}var m=e(a,b),n=j(m),o=Date.now(),p=null==n||!0==n;f('need to move?',p),i()}},function(a,b,c){var d=c(3);a.exports=function(a,b,c){1<c&&(console.warn('percent is greater than one :(',c),c=1),0>c&&(console.warn('percent is lower than zero :(',c),c=0);var e=Object.assign({},a);switch(b){case'up':switch(a.direction){case 0:e.y-=d.boardItemSize*c;break;case 90:e.x+=d.boardItemSize*c;break;case 180:e.y+=d.boardItemSize*c;break;case 270:e.x-=d.boardItemSize*c;break;default:console.error('wrong direction detected',a);}break;case'down':switch(a.direction){case 0:e.y+=d.boardItemSize*c;break;case 90:e.x-=d.boardItemSize*c;break;case 180:e.y-=d.boardItemSize*c;break;case 270:e.x+=d.boardItemSize*c;break;default:console.error('wrong direction detected',a);}break;case'left':e.direction-=90*c;break;case'right':e.direction+=90*c;break;default:console.warn('unknown program instruction detected',b);}for(;360<=e.direction;)e.direction-=360;for(;0>e.direction;)e.direction+=360;return e}},function(a,b,c){var d=c(1),e=c(3),f=document.getElementById('robot');a.exports=function(a,b){'number'!=typeof b&&(b=1);var c=d.ctx,g=e.boardItemSize-e.boardItemMargin,h=0.05*g*b,i=0.9*g*b,j=0.5*g*b;c.save(),c.translate(a.x,a.y),c.rotate(a.direction*Math.PI/180),c.drawImage(f,-j+h,-j+h,i,i),c.restore()}},function(a,b,c){var d=Math.round,e=Math.floor,f=c(1),g=c(3),h=c(22),i=c(2);a.exports=function(a,b){var c=i.getBoard(),d=h(c),j=f.centerX-e(d.x/2)*g.boardItemSize-g.boardItemSize/2,k=f.centerY-e(d.y/2)*g.boardItemSize-g.boardItemSize/2,l=g.boardItemSize-g.boardItemMargin,m=0.5*l;return{x:j+a*g.boardItemSize+m,y:k+b*g.boardItemSize+m}},a.exports.reverse=function(a,b){var c=i.getBoard(),j=h(c),k=f.centerX-e(j.x/2)*g.boardItemSize-g.boardItemSize/2,l=f.centerY-e(j.y/2)*g.boardItemSize-g.boardItemSize/2,m=g.boardItemSize-g.boardItemMargin,n=0.5*m;return{x:d((a-k-n)/g.boardItemSize),y:d((b-l-n)/g.boardItemSize)}}},function(a,b,c){var d=c(40),e=c(21),f=c(2);a.exports=function(a){var b=d.reverse(a.x,a.y),c=f.getBoard(),g=c.find((a)=>a.type==e.E),h=!0;return g?h=g.x==b.x&&g.y==b.y:(console.error('there is no target tile in board'),h=!1),h}},function(a,b,c){var d=c(1),e=c(3),f=document.getElementById('smiley'),g=document.getElementById('sad');a.exports=function(a){var b=d.ctx,c=Math.min(d.centerX,d.centerY),e=0.05*c,h=0.9*c,i=0.5*c;b.save(),b.translate(d.centerX,d.centerY),b.rotate((45*Math.random()-22.5)*Math.PI/180),b.drawImage(a?f:g,-i+e,-i+e,h,h),b.restore()}},function(a){a.exports={beforeResultTimeSeconds:0.25,resultTimeSeconds:10,robotStepTimeSeconds:2,waitForNextStepSeconds:0.5}},function(a,b,c){var d=c(0)('progbot:event:end-of-game'),e=c(30),f=c(31),g=c(2);a.exports=function(){var a=c(7);g()==g.RESULT_ANIMATION?(d('canceling the result screen'),f.cancelResult()):(d('end of the game'),g(g.END),a.done(),e())}},function(a,b,c){var d=Math.min,e=Math.max,f=c(1),g=c(3),h=c(0)('progbot:draw:util:extend-board');a.exports=function(a){var b=Object.assign({},a);return b.x=e(0,b.x-g.boardItemSize),b.y=e(0,b.y-g.boardItemSize),b.w=d(f.width,b.w+2*g.boardItemSize),b.h=d(f.height,b.h+2*g.boardItemSize),h('extend boar from %o to %o',a,b),b}},function(a,b,c){var e=c(40),f=c(2);a.exports=function(a,b){var c=f.getBoard(),g=e.reverse(a.x,a.y),h=Object.assign({},g),i=0;if('up'==b?i=1:'down'==b&&(i=-1),i)switch(a.direction){case 0:h.y-=i;break;case 90:h.x+=i;break;case 180:h.y+=i;break;case 270:h.x-=i;}var d=c.find((a)=>a.x==h.x&&a.y==h.y);return d}},function(a){a.exports=function(a){var b=null;return a&&(b=!(1&a.type)),b}},function(a,b,c){var d=c(0)('progbot:event:on:end-of-programming:fall-down'),e=c(39),f=c(43),g=c(33),h=1e3*f.robotStepTimeSeconds;a.exports=function(a,b){function c(){var f=Date.now(),i=Math.min(1,(f-d)/h);g.restore(),e(a,1-i),1>i?setTimeout(c,1e3/25):b()}var d=Date.now();c()}}]);